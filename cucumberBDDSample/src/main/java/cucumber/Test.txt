import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
import java.util.Iterator;
import java.util.Set;
import java.util.HashSet;

public class APIResponseValidator {
    public static void main(String[] args) throws Exception {
        // Expected attributes
        Set<String> expectedAttributes = Set.of("name", "age", "city");

        // Sample API response (JSON string)
        String jsonResponse = "{ \"name\": \"John\", \"age\": 30, \"city\": \"New York\" }";

        // Convert JSON string to JsonNode
        ObjectMapper objectMapper = new ObjectMapper();
        JsonNode jsonNode = objectMapper.readTree(jsonResponse);

        // Extract actual attributes
        Set<String> actualAttributes = new HashSet<>();
        Iterator<String> fieldNames = jsonNode.fieldNames();
        while (fieldNames.hasNext()) {
            actualAttributes.add(fieldNames.next());
        }

        // Validate attributes
        if (actualAttributes.equals(expectedAttributes)) {
            System.out.println("✅ API response attributes are valid!");
        } else {
            System.out.println("❌ API response attributes do not match expected attributes.");
            System.out.println("Expected: " + expectedAttributes);
            System.out.println("Actual: " + actualAttributes);
        }
    }
}
